---
import { DateTime, DurationLike } from 'luxon';

export interface Props {
  daysAgo: DurationLike;
}

const { daysAgo } = Astro.props;
---

<script>
  import { DateTime } from 'luxon';

  const daysSinceElement = document.querySelector('.days-since');

  if (daysSinceElement instanceof HTMLElement) {
    setInterval(() => {
      const duration = JSON.parse(daysSinceElement?.dataset.days ?? '');
      const displayedDay = DateTime.now()
        .minus(duration)
        .toLocaleString(DateTime.DATETIME_FULL_WITH_SECONDS);
      daysSinceElement.innerHTML = `It is currently ${displayedDay}`;
    }, 1000);
  }
</script>

<header class='header-wrapper'>
  <p class='channel-hash'>#</p>
  <h2>watch-watch-mints</h2>
  <p class='channel-description'>watch the breath mints watch the breath mints.</p>
  <p class='days-since channel-description' data-days={JSON.stringify(daysAgo)}></p>
</header>

<style>
  .header-wrapper {
    grid-area: header;
    display: flex;
    flex-flow: row nowrap;
    align-items: center;
    box-shadow: 0 1px 1px hsl(0deg 0% 0% / 0.075), 0 2px 2px hsl(0deg 0% 0% / 0.075),
      0 4px 4px hsl(0deg 0% 0% / 0.075);
    position: relative;
    z-index: 100;
  }

  .channel-hash {
    font-size: 2.4rem;
    padding: 0 1rem;
  }

  .channel-description {
    border-left: 1px solid var(--light-grey);
    margin: 0 1.2rem;
    padding: 0 1.2rem;
    color: var(--light-grey);
  }
</style>
